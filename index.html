<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>FIDS Bandara Luwuk</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="app">

  <!-- HEADER -->
  <div class="header">
    <div class="header-title">
      ✈ UPBU SYUKURAN A. AMIR LUWUK
    </div>
    <div class="header-time">
      <div class="clock" id="clock">--:--:--</div>
      <div class="date" id="date">--</div>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- KEBERANGKATAN -->
    <div class="panel">
      <div class="panel-title">KEBERANGKATAN DOMESTIK</div>
      <table id="dep"></table>
    </div>

    <!-- KEDATANGAN -->
    <div class="panel">
      <div class="panel-title">KEDATANGAN DOMESTIK</div>
      <table id="arr"></table>
    </div>

  </div>

  <!-- FOOTER -->
  <div class="footer">
    © SYUKURAN AMINUDDIN AIRPORT
  </div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycby2PQGqkhXwJ-YZiTI7IK48ZCFPgCvDuIqJvTMJJvoIyVCYSwZ-e6caAqk_WGksaO1dyg/exec";

/* JAM */
function updateClock(){
  const now = new Date();
  document.getElementById("clock").innerText =
    now.toLocaleTimeString("id-ID",{hour12:false});
  document.getElementById("date").innerText =
    now.toLocaleDateString("id-ID",{
      weekday:"long",
      day:"2-digit",
      month:"long",
      year:"numeric"
    });
}
setInterval(updateClock,1000);
updateClock();

/* DATA */
fetch(API_URL)
  .then(res => res.json())
  .then(data => {
    const dep = document.getElementById("dep");
    const arr = document.getElementById("arr");

    dep.innerHTML = `
      <tr><th>PENERBANGAN</th><th>TUJUAN</th><th>JADWAL</th><th>STATUS</th></tr>
    `;
    arr.innerHTML = `
      <tr><th>PENERBANGAN</th><th>ASAL</th><th>JADWAL</th><th>STATUS</th></tr>
    `;

    data.forEach(f => {
      const statusClass = (f.status || "").toLowerCase().replace(/\s/g,"-");
      const row = `
        <tr>
          <td>${f.maskapai}</td>
          <td>${f.kota}</td>
          <td>${f.jam}</td>
          <td class="status ${statusClass}">${f.status}</td>
        </tr>
      `;
      if (f.jenis === "keberangkatan") dep.innerHTML += row;
      if (f.jenis === "kedatangan") arr.innerHTML += row;
    });
  });
</script>

</body>
</html>
